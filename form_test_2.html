<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="/assets/iframe_ext/jquery_mostRecent.js"></script>
    <script src="/form_funct.js"></script>
    <script src="/submit_init.js"></script>
    <link href="./form_css.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
    
  </head>

  <body>
	
	<!-- +++++ Testing Form +++++ -->
	
    <div class="container-fluid">
      <div class="row justify-content-center">
          <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
              <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                  <h2 id="heading">Dynamic Form Test</h2>
                  <p>Testing a dynamic form. It uses GPT3 to create follow-up questions based on your open ended responses. The form is structured as a product feedback form, but the idea is that you can 
                    expand this to anything, i.e. opinion surveys, voice of customer surveys, etc.
                  </p>
                  
                  <form id="msform">
                      <!-- progressbar -->
                      <ul id="progressbar">
                          <li class="active"><strong>Initial</strong></li>
                          <li ><strong>Dynamic Generated</strong></li>
                      </ul>
                      <div class="progress">
                          <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                      </div> <br> <!-- fieldsets -->

                      <fieldset>
                          <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Initial Review</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 1 - 2</h2>
                                </div>
                            </div>

                            <label class="fieldlabels">Please enter what product you are providing feedback for: </label> 
                            <input type="text" name="product" id="productQ" placeholder="Type Here" /> 
                            
                            <label class="fieldlabels">Please type your review here. Please list areas of improvement, or features that worked well. You can also leave general comments.</label> 
                            <textarea type="textarea" name="openR" id="openRQ" placeholder="Type Here"></textarea> 
                            
                          </div> 

                          <input type="button" name="next" class="next action-button" value="Next" onclick="submit_init()"/>
                      </fieldset>
                      <fieldset>
                          <div class="form-card">
                              <div class="row">
                                  <div class="col-7">
                                      <h2 class="fs-title">Additional Questions</h2>
                                  </div>
                                  <div class="col-5">
                                      <h2 class="steps">Step 2 - 2</h2>
                                  </div>
                              </div> 
                              
                              <label class="fieldlabels" id="DynQ1">Placeholder</label>
                              <textarea type="textarea" name="DynQ1R" id="DynQ1R" placeholder="Type Here"></textarea>
                              
                              <label class="fieldlabels" id="DynQ2">Placeholder</label>
                              <textarea type="textarea" name="DynQ2R" id="DynQ2R" placeholder="Type Here"></textarea> 

                              <label class="fieldlabels" id="DynQ3">Placeholder</label>
                              <textarea type="textarea" name="DynQ3R" id="DynQ3R" placeholder="Type Here"></textarea> 

                          </div> 
                          <input type="submit" name="next" class="next action-button" value="Submit" /> 
                          <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                      </fieldset>
                      
                  </form>

                  <p>
                    Credit to the forms <a href="https://csshint.com/multi-step-html-forms/">here</a> for me to template off of.
                  </p>
              </div>
          </div>
      </div>
  </div>


  <script>

        async function main(){
            var prompt=`A user is giving feedback on the product: "cake". The user has provided the following open ended feedback:"It's too sweet". Generate a set of 3 questions asking for elaboration on their feedback with the goal of eliciting more specific details of their opinion.`

            const { Configuration, OpenAIApi } = require("openai");

            //console.log('OpenAI')

            const configuration = new Configuration({
                apiKey: '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',
            });
            const openai = new OpenAIApi(configuration);

            const response = await openai.createCompletion({
                model: "text-davinci-003",
                prompt: prompt,
                temperature: 0.9,
                max_tokens: 250,
                top_p: 1,
                frequency_penalty: 0,
                presence_penalty: 0.6,
            });

        }

        console.log(main())
        
  </script>

  </body>

</html>